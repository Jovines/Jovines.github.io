{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/inside/source/styles.e987407a0a9d77c7ba00.css","path":"styles.e987407a0a9d77c7ba00.css","modified":0,"renderable":1},{"_id":"themes/inside/source/runtime.caef73fae70e33459c5a.js","path":"runtime.caef73fae70e33459c5a.js","modified":0,"renderable":1},{"_id":"themes/inside/source/polyfills.28555e618578fe61f50a.js","path":"polyfills.28555e618578fe61f50a.js","modified":0,"renderable":1},{"_id":"themes/inside/source/main.e456207a2fb3a1560aeb.js","path":"main.e456207a2fb3a1560aeb.js","modified":0,"renderable":1}],"Cache":[{"_id":"themes/inside/.gitignore","hash":"f964b070d203c5e8555d4cc0ecafe1ecaac88079","modified":1569415154000},{"_id":"themes/inside/.npmignore","hash":"da713828cf6427eec231c5423ed9c360016a8a80","modified":1569415154000},{"_id":"themes/inside/LICENSE","hash":"80e42bdfa4902549136f3a2445f16bff8ec46be8","modified":1569415154000},{"_id":"themes/inside/.travis.yml","hash":"0594031d3d9f6b8a7c142dc92c9d5063eb4781a1","modified":1569415154000},{"_id":"themes/inside/README.md","hash":"66a773039ac6de2557780203c294b6e12b1d13d4","modified":1569415154000},{"_id":"themes/inside/README_zh-Hans.md","hash":"fff71f475b22dc79f426c196268c36b8d5bb8ef5","modified":1569415154000},{"_id":"themes/inside/_config.yml","hash":"2ecc18e288d88ad0ae999a715270d9dd14ae989d","modified":1569956005550},{"_id":"themes/inside/package.json","hash":"1a1776c3f76ef797fe2c4a5a4579e3220a08a427","modified":1569415154000},{"_id":"themes/inside/avatar.jpg","hash":"9f80467c81cbd98c7804ace3bdf6393d4cf7fb1d","modified":1569690392000},{"_id":"source/_posts/hexo下完美插入图片.md","hash":"0e2f2d717f78bfc6c1ba549ae8f5824f4d20fd6d","modified":1569942810506},{"_id":"source/_posts/基于酷q平台的管理机器人.md","hash":"6c88edf3136cdd56eb6287f4375a446ceaa8d7d5","modified":1569956522260},{"_id":"themes/inside/.github/stale.yml","hash":"cd81583c047c8835799a242566338b48271a67dd","modified":1569415154000},{"_id":"themes/inside/languages/default.yml","hash":"bc83e56a99531ff82dcd7b6f752a4db0980d3dee","modified":1569415154000},{"_id":"themes/inside/languages/en.yml","hash":"bc83e56a99531ff82dcd7b6f752a4db0980d3dee","modified":1569415154000},{"_id":"themes/inside/languages/ja.yml","hash":"6c2c935a56347de087806b1ae7644f484994fe3c","modified":1569415154000},{"_id":"themes/inside/languages/zh-Hans.yml","hash":"c7aaba0d495bd20e09b9063476a183a6d0718f63","modified":1569415154000},{"_id":"themes/inside/languages/zh-Hant.yml","hash":"46ca125b558357420e827b9d276a09777edcd914","modified":1569415154000},{"_id":"themes/inside/layout/index.ejs","hash":"cdb5762d3e622afa976176dfb170c21286b43d98","modified":1569944443928},{"_id":"themes/inside/lib/config.js","hash":"56f0d8c8bca73c5fa2659859c9403edf53e14d0d","modified":1569415154000},{"_id":"themes/inside/lib/configSchema.json","hash":"7cea99799c35e4f3252264867649c253dc25eaa6","modified":1569415154000},{"_id":"themes/inside/lib/utils.js","hash":"b251a15f92f6f7b9694589087b5e29f9efe87c20","modified":1569415154000},{"_id":"themes/inside/scripts/index.js","hash":"380f27fb0f1dfb0ec51a2a3c96b9014bff5bf862","modified":1569415154000},{"_id":"themes/inside/source/_resources.json","hash":"d6ca64926a3e104b562d4b40eda57fc71445fc2c","modified":1569415154000},{"_id":"themes/inside/source/_theme.js","hash":"23d7d44bfd5d48750c1d93d08874fa13e7ed45fe","modified":1569415154000},{"_id":"themes/inside/source/styles.e987407a0a9d77c7ba00.css","hash":"679ffc474a517aa724f78b6e1494ed28a9938058","modified":1569415154000},{"_id":"themes/inside/source/runtime.caef73fae70e33459c5a.js","hash":"a9aafcf49f49145093fc831efd9b8e2f6c71bb9c","modified":1569415154000},{"_id":"themes/inside/test/README.md","hash":"96cdb8d68278f099ebfc9c7f6a4745da622e34dd","modified":1569415154000},{"_id":"themes/inside/test/index.js","hash":"235de0b2dbcc456c6a7e765e60fe7c36808dc7a4","modified":1569415154000},{"_id":"themes/inside/test/jasmine.json","hash":"8a6ad42f0a1d94c252d041f18ee63669b660b15d","modified":1569415154000},{"_id":"themes/inside/source/polyfills.28555e618578fe61f50a.js","hash":"3f2bda6f4ad460988984e0da6cd479ef66ea7a79","modified":1569415154000},{"_id":"source/_posts/基于酷q平台的管理机器人/酷q配置坏境的注意事项.jpg","hash":"063638a3f3fc078ad055c8bba8ab6f53b6126944","modified":1569933796977},{"_id":"themes/inside/.github/ISSUE_TEMPLATE/bug-report-----.md","hash":"8cb384a909f538c6d22d3362424375d4332d6390","modified":1569415154000},{"_id":"themes/inside/.github/ISSUE_TEMPLATE/bug_report.md","hash":"551a4ed855c1e3ae3f1ad6176a529caacab70f52","modified":1569415154000},{"_id":"themes/inside/.github/ISSUE_TEMPLATE/question.md","hash":"9f8004c63012d6b16b6d93f3f10293b84cbdf3f2","modified":1569415154000},{"_id":"themes/inside/.github/ISSUE_TEMPLATE/feature_request.md","hash":"4a5ec7b77092bf55fab55b3a8221197e21d34f35","modified":1569415154000},{"_id":"themes/inside/lib/filter/post.js","hash":"c842517cae84f001a1f2c55704e6f63f50127127","modified":1569415154000},{"_id":"themes/inside/lib/filter/index.js","hash":"aeb29f86ee812ce4d35ac113c6f4b4377a03cf83","modified":1569415154000},{"_id":"themes/inside/lib/filter/templates.js","hash":"86b31cec8512f37824dc4b18c89d0cf7b5987de5","modified":1569415154000},{"_id":"themes/inside/lib/helper/ga.js","hash":"adc62bd06443a781d6046d3e78aa57b5e4291611","modified":1569415154000},{"_id":"themes/inside/lib/helper/index.js","hash":"93fbe9d8fe364cf4e2e55cc3d4d3156dde028f56","modified":1569415154000},{"_id":"themes/inside/lib/helper/url_trim.js","hash":"a88302c028d2667d9336b72b50e0590e0b2edcd1","modified":1569415154000},{"_id":"themes/inside/lib/helper/structured_data.js","hash":"682cfb827880ccfe5a972bb326ab4691cd8c470d","modified":1569415154000},{"_id":"themes/inside/lib/generator/config.js","hash":"58f26e1f911e71152e38a14eb8e964d611c05639","modified":1569415154000},{"_id":"themes/inside/lib/generator/index.js","hash":"db2de76bb98300e21f6b88d60915a14f799150e1","modified":1569415154000},{"_id":"themes/inside/lib/generator/manifest.js","hash":"e6eb7d3353fb1e13218535a3987cd31d569fc5bd","modified":1569415154000},{"_id":"themes/inside/lib/generator/sitemap.js","hash":"5ab54fccd7a89a4c0e34562b3535120daf37ddc3","modified":1569415154000},{"_id":"themes/inside/lib/generator/sw.js","hash":"216cc78d48e0dd3d0cff374c49bdc8e83b2ecd62","modified":1569415154000},{"_id":"themes/inside/lib/generator/theme.js","hash":"416fa83328d9e99ef073813689bbf361eda28344","modified":1569415154000},{"_id":"themes/inside/lib/tag/canvas.js","hash":"24c02f85506c1f412a3386d14f1ceb074e4864e2","modified":1569415154000},{"_id":"themes/inside/lib/theme-processor/index.js","hash":"467e4a90ba6d63d9936868488ce0ef528208cfd5","modified":1569415154000},{"_id":"themes/inside/lib/tag/index.js","hash":"bf75dd670a1d6ffffbacb183b406235780d680c6","modified":1569415154000},{"_id":"themes/inside/lib/tag/gist.js","hash":"4bedda6e6c07e2eeac3a3fc97617181287d77d34","modified":1569415154000},{"_id":"themes/inside/lib/theme-processor/localized-script.js","hash":"468389aaba3a5413e73cd648ed1b718c7fae242a","modified":1569415154000},{"_id":"source/_posts/基于酷q平台的管理机器人/idea新建项目.png","hash":"0026d0df8f7ae8344dd4253f49cbdb60234d8bb1","modified":1569935157968},{"_id":"source/_posts/基于酷q平台的管理机器人/请假文档.jpg","hash":"3cb4327ce4afdd8ab91c5e7ea2a8e41964fa4f62","modified":1569936611059},{"_id":"source/_posts/基于酷q平台的管理机器人/通知.jpg","hash":"80221ec8da96e102e46d7ce817f55ee7ec7e6f3e","modified":1569935906931},{"_id":"source/_posts/基于酷q平台的管理机器人/补登请假.jpg","hash":"e994bb24b249a20ebdf956a029212dc045dbb785","modified":1569937023931},{"_id":"themes/inside/lib/generator/entries/archives.js","hash":"cf630bd902efd92ac710b75f1c63b03a61a27feb","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/pages.js","hash":"0894e9a02e7580400009f1619ea21ed362ba1811","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/categories.js","hash":"7675804a6dcfc0fdb789644be2aa87557c826635","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/posts.js","hash":"f0de8451a09a78c330d0f5602bf3e92bf4f690d7","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/properties.js","hash":"92e85ab430294ba0c6fb57347cc0ea977695b25e","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/index.js","hash":"dabc6ee5324b9864b2030eee79b7ceb22319e63f","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/tags.js","hash":"e462331c70fa1202e2376bb6a441e2001599f9b4","modified":1569415154000},{"_id":"themes/inside/lib/generator/entries/search.js","hash":"0ecccc181b0140ead9d99ff11f4e5b43132aefc0","modified":1569415154000},{"_id":"themes/inside/test/scripts/filters/index.js","hash":"6d3d9f945edeac1041392db2c8a71d8e4ee8f2ad","modified":1569415154000},{"_id":"themes/inside/test/scripts/filters/post.js","hash":"59dace4aec7f4d1d98d82d1677174489a826b44e","modified":1569415154000},{"_id":"themes/inside/test/scripts/filters/template.js","hash":"fb2af77fa87a9c3bf167d2b99bb255ee982b91a9","modified":1569415154000},{"_id":"themes/inside/test/scripts/tags/canvas.js","hash":"df3fd748c6c5d5414e4f84be127fbbcdb37250de","modified":1569415154000},{"_id":"themes/inside/test/scripts/tags/index.js","hash":"4ce8c76c53c05fba25bc49fa90a80b75afffa052","modified":1569415154000},{"_id":"themes/inside/test/scripts/tags/gist.js","hash":"946b40aa186980524bef5ab5d4c0d8c95153f473","modified":1569415154000},{"_id":"themes/inside/test/scripts/helpers/index.js","hash":"bfefb20e24d48ca6a130e655d862f929d7ffb43c","modified":1569415154000},{"_id":"themes/inside/test/scripts/helpers/structured_data.js","hash":"8878e0177631c71515820bb10c1084c21e4de6f8","modified":1569415154000},{"_id":"themes/inside/test/scripts/helpers/ga.js","hash":"10922cd6920121846c10f00c27d40bdc1707e2c8","modified":1569415154000},{"_id":"themes/inside/test/scripts/helpers/url_trim.js","hash":"2cabd9aa7b6eb7058288fb50d4cd707874260df6","modified":1569415154000},{"_id":"themes/inside/test/scripts/utils/index.js","hash":"2bf714d761741f4a4d2e0fb611bcd5155fc69a3d","modified":1569415154000},{"_id":"themes/inside/test/scripts/utils/parseConfig.js","hash":"922aa8f4d7b2cdc29de07d14c1ade62f53759ec8","modified":1569924365316},{"_id":"themes/inside/test/scripts/utils/rest.js","hash":"b328280ec61c25462d88e64fd8259bd85610e815","modified":1569415154000},{"_id":"source/_posts/基于酷q平台的管理机器人/导包.png","hash":"7e71c94363d693cb15674346a2fd02f69cfc9a1d","modified":1569935466274},{"_id":"themes/inside/source/main.5509fae49a8263eb6b15.zh-Hant.js","hash":"ce550ad820967b20739a2b77028d3ed1bed1da85","modified":1569415154000},{"_id":"themes/inside/source/main.77374c447781af9644db.ja.js","hash":"dcd1d94f7e6829656a4eb9e5fcf42ee79079432a","modified":1569415154000},{"_id":"themes/inside/source/main.e456207a2fb3a1560aeb.js","hash":"4879a70693728cf20564f6a200bfc59586136e53","modified":1569415154000},{"_id":"themes/inside/source/main.1efb2acb62d508679d87.zh-Hans.js","hash":"ee7726cde8ea65e65768fc3873ec5e4c69433758","modified":1569415154000},{"_id":"source/_posts/基于酷q平台的管理机器人/请假.jpg","hash":"1d5ff10c29d7aab41ce2f546bf8ad5ed9782beb4","modified":1569936212883},{"_id":"source/_drafts/测试.md","hash":"c364315229b23ed4a2aa59a969c1dbb0a3cdc4c6","modified":1569958422973},{"_id":"source/_posts/测试.md","hash":"c364315229b23ed4a2aa59a969c1dbb0a3cdc4c6","modified":1569958418978},{"_id":"source/_posts/试.md","hash":"c364315229b23ed4a2aa59a969c1dbb0a3cdc4c6","modified":1569958517617}],"Category":[{"name":"兴趣","_id":"ck1886rpf0002qww05mlzbosy"}],"Data":[],"Page":[],"Post":[{"title":"完美的hexo中插入图片的解决方案","date":"2019-10-01T15:13:00.000Z","_content":"\n# 完美的hexo中插入图片的解决方案\n\n以下内容来自ETRD的[《hexo中完美插入本地图片》]([http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/](http://etrd.org/2017/01/23/hexo中完美插入本地图片/))，摘录整理关键部分，留作备份。\n\n### Markdown编辑器\n\n  * **Typora**\n\n    > 不需要关注太多markdown语法就能写出比较好看的markdown，支持实时转换\n\n### Hexo配置文件的设置\n\n 确保你的Hexo的配置文件_config.yml里面有个这个选项配置，并将其置为true\n\n```\npost_asset_folder: true\n```\n\n 这个功能实际上是Hexo官方文档中提到的资源文件夹功能，它的作用在于当你使用\n\n```\nhexo new\n```\n\n生成一篇新文章时，会在\n\n```\n\\source\\_posts\n```\n\n目录下生成一个 文章名.md 文件外，附带生成一个与 文章名 同名的文件夹，可以用它来存放这篇文章的所有资源，比如图片，附件等\n\n[![QQ截图20170123112354](http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123112354.png)](http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123112354.png)\n\n实际上我通常喜欢自己右键手动去建立一个md文件来写博客，而不使用hexo new命令，此时要达到同样的效果，我同样也需要手动去建立一个同名的文件夹去存放资源，我试过这样做是可行的，并且这样做虽然有点麻烦，但我似乎发现了它的一个优点，那就是当我的文章中没有图片时，我并不需要这个空的资源文件夹。\n\n有了上面的配置，Hexo在public文件下生成html文件时，会在相应的目录中把那文章对应的资源文件夹中的图片等附件复制过去，例如，这是我生成的一个例子：\n\n[![QQ截图20170123114005](http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123114005.png)](http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123114005.png)\n\n### 安装hexo-asset-image插件\n\n你需要安装一个图片路径转换的插件，这个插件名字是**hexo-asset-image**，我目前安装的是最新的0.03版本，使用如下命令安装插件\n\n```\nnpm install https://github.com/CodeFalling/hexo-asset-image --save\n```\n\n插件安装完以后，实际上是存放在下面的目录文件夹下\n\n```\n\\blog\\node_modules\\hexo-asset-image\n```\n\n想要卸载这个插件怎么处理，我听说直接删掉这个文件夹，反正我这么试过了。\n\n### md文件的时间标签\n\nhexo-asset-image的原理应该是根据Hexo生成html后以时间的为目录的规则，将我们图片的相对地址转换成了生成后与时间对应目录的绝对地址，因此我认为md文件中应该要有时间标签，一来是为了让Hexo根据md的时间标签来确定文章的新旧排序，如果没有时间标签，Hexo会把md文件的修改时间作为发布时间，这显然是不合理的，再者这个时间标签，我想hexo-asset-image也会引用到，在一篇实际的博文中，我的md文件完整的开头是这样的：\n\n```\n---title: hexo中完美插入本地图片date: 2017-01-23 11:00:55categories: hexo使用tags: - hexo- 本地图片- hexo-asset-image---\n```\n\n### 插入图片\n\n由于每个md文件都有对应的一个资源文件夹，因此，你首先要把需要插入的图片放到这个资源文件夹下，然后进行路径引用，这是上面插入图片时的实际引用代码\n\n```\n![QQ截图20170123114005](/hexo中完美插入本地图片/QQ截图20170123114005.png)\n```\n\n使用Typora又有一个十分方便的地方在于，只需要将图片往这里一拖就插入了，但其实际拖入图片后的插入代码是绝对路径的引用，是这样的\n\n```\n![QQ截图20170123114005](K:\\FangCloudSync\\Github博客源码\\blog\\source\\_posts\\hexo中完美插入本地图片\\QQ截图20170123114005.png)\n```\n\n对比上面的两个代码，我只需要将前面的那段绝对路径删掉~~K:\\FangCloudSync\\Github博客源码\\blog\\source_posts~~ ，然后再将剩余的**两个\\分别换成/** 就可以了\n\n这样子，Typora编辑时同时能够看到插入的图片。\n\n### 生成测试\n\n在很多网友的文章中，这么做就可以了，你可以尝试一下生成并本地测试，看看是否博客的首页及博文的正文页都能够正确显示图片，或者打开博文生成的html源文件，找到图片插入的地方看看src路径是否是对应public后的绝对路径，如下示例这样\n\n```\n<p><img src=\"/2017/01/22/Windows下远程桌面连接树莓派3代/QQ截图20170122163331.png\" alt=\"QQ截图20170122163331\"></p>\n```\n\n如果本地预览主页和博文正文页显示图片都没有问题，并且html源文件内的图片源地址是上面的格式，那你真幸运没有遇到什么麻烦。\n\n### 生成绝对路径不完整的问题\n\n我发现我做了上面的工作后，生成并本地测试查看，图片并不能正确显示，我查看了html文件，它生成的路径是这样的\n\n```\n<p><img src=\"/22/imagetest/500.jpg\" alt=\"500\"></p>\n```\n\n看起来hexo-asset-image的确起了点作用，但似乎有点问题，它生成的绝对路径不完整，仿佛只获取了日，年月没获取到，因为这个md文件的时间是2017-01-22，所以”/2017/01” 似乎没有生成啊，对比上面正确正常的绝对路径，我不明白这是什么原因导致的，也许有可能是我使用的hexo懒人包导致的，Google了一晚上好像就我一个人有这种情况，最后我也在Github上向该插件的作者递交了我遇到的麻烦，但估计等到作者回复不知道是何时了。\n\n今天早上，我受到[自定义修改插件，更便捷的使用七牛空间](http://error408.com/2016/08/02/Hexo七牛图床使用/) 这篇文章的启发，决定自己也尝试修改插件代码试试能否解决。虽然完全不懂js代码，但还是尝试阅读了那段极其简练的代码，这是其中一段：\n\n```\n   var link = data.permalink;var beginPos = getPosition(link, '/', 3) + 1;// In hexo 3.1.1, the permalink of \"about\" page is like \".../about/index.html\".var endPos = link.lastIndexOf('/') + 1;   link = link.substring(beginPos, endPos);\n```\n\n可以猜测出来这段点大概是在获取博文生成的绝对路径，然后最后与md文件中的相对路径做一个拼接，但这个函数中\n\n```\nvar beginPos = getPosition(link, '/', 3) + 1;\n```\n\n为什么是寻找第3个’/‘？虽然我不知道，但这样做肯定有作者的意图，只是我不懂其中的原理不理解，不可能这个关键的数字是错的。但我假设如果完整的路径应该是/2017/01/22，那么第3个/似乎正好是日期里面的日，跟我的html生成的不完整的路径点似乎有点关联，因此如果这个数字修改为1，那么是不是就能将/2017/01补上了，试试看吧，然而，幸运的是，成功了！\n\n```\nvar beginPos = getPosition(link, '/', 1) + 1;//just by launcher\n```\n\n### 小结\n\n需要插入本地图片，并让Hexo启用资源文件的功能，每个md文件对应一个资源文件夹，然而这只是方便了资源的管理，插入图片时不推荐使用hexo官方说的不伦不类的标签插入方法，因为编辑md文件时无法预览图片，而需要安装hexo-asset-image插件，这样正常使用markdown语法对图片的相对路径引用，即可实现编辑时可预览图片，且发布时插件自动将相对路径转为绝对路径。如果碰到与我同样的生成的绝对路径不完全的情况，尝试修改插件的js代码，但修改器建议先备份它，我认为我所解决我遇到问题的方法可能是一种巧合，但我暂时先这么使用了，最终的原因和处理方法可能还需要等待Github上该插件作者的官方回应。","source":"_posts/hexo下完美插入图片.md","raw":"---\ntitle: 完美的hexo中插入图片的解决方案\ndate: 2019-10-01 23:13:00\ntags:\n- hexo配置\ncategories: 兴趣\n---\n\n# 完美的hexo中插入图片的解决方案\n\n以下内容来自ETRD的[《hexo中完美插入本地图片》]([http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/](http://etrd.org/2017/01/23/hexo中完美插入本地图片/))，摘录整理关键部分，留作备份。\n\n### Markdown编辑器\n\n  * **Typora**\n\n    > 不需要关注太多markdown语法就能写出比较好看的markdown，支持实时转换\n\n### Hexo配置文件的设置\n\n 确保你的Hexo的配置文件_config.yml里面有个这个选项配置，并将其置为true\n\n```\npost_asset_folder: true\n```\n\n 这个功能实际上是Hexo官方文档中提到的资源文件夹功能，它的作用在于当你使用\n\n```\nhexo new\n```\n\n生成一篇新文章时，会在\n\n```\n\\source\\_posts\n```\n\n目录下生成一个 文章名.md 文件外，附带生成一个与 文章名 同名的文件夹，可以用它来存放这篇文章的所有资源，比如图片，附件等\n\n[![QQ截图20170123112354](http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123112354.png)](http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123112354.png)\n\n实际上我通常喜欢自己右键手动去建立一个md文件来写博客，而不使用hexo new命令，此时要达到同样的效果，我同样也需要手动去建立一个同名的文件夹去存放资源，我试过这样做是可行的，并且这样做虽然有点麻烦，但我似乎发现了它的一个优点，那就是当我的文章中没有图片时，我并不需要这个空的资源文件夹。\n\n有了上面的配置，Hexo在public文件下生成html文件时，会在相应的目录中把那文章对应的资源文件夹中的图片等附件复制过去，例如，这是我生成的一个例子：\n\n[![QQ截图20170123114005](http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123114005.png)](http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123114005.png)\n\n### 安装hexo-asset-image插件\n\n你需要安装一个图片路径转换的插件，这个插件名字是**hexo-asset-image**，我目前安装的是最新的0.03版本，使用如下命令安装插件\n\n```\nnpm install https://github.com/CodeFalling/hexo-asset-image --save\n```\n\n插件安装完以后，实际上是存放在下面的目录文件夹下\n\n```\n\\blog\\node_modules\\hexo-asset-image\n```\n\n想要卸载这个插件怎么处理，我听说直接删掉这个文件夹，反正我这么试过了。\n\n### md文件的时间标签\n\nhexo-asset-image的原理应该是根据Hexo生成html后以时间的为目录的规则，将我们图片的相对地址转换成了生成后与时间对应目录的绝对地址，因此我认为md文件中应该要有时间标签，一来是为了让Hexo根据md的时间标签来确定文章的新旧排序，如果没有时间标签，Hexo会把md文件的修改时间作为发布时间，这显然是不合理的，再者这个时间标签，我想hexo-asset-image也会引用到，在一篇实际的博文中，我的md文件完整的开头是这样的：\n\n```\n---title: hexo中完美插入本地图片date: 2017-01-23 11:00:55categories: hexo使用tags: - hexo- 本地图片- hexo-asset-image---\n```\n\n### 插入图片\n\n由于每个md文件都有对应的一个资源文件夹，因此，你首先要把需要插入的图片放到这个资源文件夹下，然后进行路径引用，这是上面插入图片时的实际引用代码\n\n```\n![QQ截图20170123114005](/hexo中完美插入本地图片/QQ截图20170123114005.png)\n```\n\n使用Typora又有一个十分方便的地方在于，只需要将图片往这里一拖就插入了，但其实际拖入图片后的插入代码是绝对路径的引用，是这样的\n\n```\n![QQ截图20170123114005](K:\\FangCloudSync\\Github博客源码\\blog\\source\\_posts\\hexo中完美插入本地图片\\QQ截图20170123114005.png)\n```\n\n对比上面的两个代码，我只需要将前面的那段绝对路径删掉~~K:\\FangCloudSync\\Github博客源码\\blog\\source_posts~~ ，然后再将剩余的**两个\\分别换成/** 就可以了\n\n这样子，Typora编辑时同时能够看到插入的图片。\n\n### 生成测试\n\n在很多网友的文章中，这么做就可以了，你可以尝试一下生成并本地测试，看看是否博客的首页及博文的正文页都能够正确显示图片，或者打开博文生成的html源文件，找到图片插入的地方看看src路径是否是对应public后的绝对路径，如下示例这样\n\n```\n<p><img src=\"/2017/01/22/Windows下远程桌面连接树莓派3代/QQ截图20170122163331.png\" alt=\"QQ截图20170122163331\"></p>\n```\n\n如果本地预览主页和博文正文页显示图片都没有问题，并且html源文件内的图片源地址是上面的格式，那你真幸运没有遇到什么麻烦。\n\n### 生成绝对路径不完整的问题\n\n我发现我做了上面的工作后，生成并本地测试查看，图片并不能正确显示，我查看了html文件，它生成的路径是这样的\n\n```\n<p><img src=\"/22/imagetest/500.jpg\" alt=\"500\"></p>\n```\n\n看起来hexo-asset-image的确起了点作用，但似乎有点问题，它生成的绝对路径不完整，仿佛只获取了日，年月没获取到，因为这个md文件的时间是2017-01-22，所以”/2017/01” 似乎没有生成啊，对比上面正确正常的绝对路径，我不明白这是什么原因导致的，也许有可能是我使用的hexo懒人包导致的，Google了一晚上好像就我一个人有这种情况，最后我也在Github上向该插件的作者递交了我遇到的麻烦，但估计等到作者回复不知道是何时了。\n\n今天早上，我受到[自定义修改插件，更便捷的使用七牛空间](http://error408.com/2016/08/02/Hexo七牛图床使用/) 这篇文章的启发，决定自己也尝试修改插件代码试试能否解决。虽然完全不懂js代码，但还是尝试阅读了那段极其简练的代码，这是其中一段：\n\n```\n   var link = data.permalink;var beginPos = getPosition(link, '/', 3) + 1;// In hexo 3.1.1, the permalink of \"about\" page is like \".../about/index.html\".var endPos = link.lastIndexOf('/') + 1;   link = link.substring(beginPos, endPos);\n```\n\n可以猜测出来这段点大概是在获取博文生成的绝对路径，然后最后与md文件中的相对路径做一个拼接，但这个函数中\n\n```\nvar beginPos = getPosition(link, '/', 3) + 1;\n```\n\n为什么是寻找第3个’/‘？虽然我不知道，但这样做肯定有作者的意图，只是我不懂其中的原理不理解，不可能这个关键的数字是错的。但我假设如果完整的路径应该是/2017/01/22，那么第3个/似乎正好是日期里面的日，跟我的html生成的不完整的路径点似乎有点关联，因此如果这个数字修改为1，那么是不是就能将/2017/01补上了，试试看吧，然而，幸运的是，成功了！\n\n```\nvar beginPos = getPosition(link, '/', 1) + 1;//just by launcher\n```\n\n### 小结\n\n需要插入本地图片，并让Hexo启用资源文件的功能，每个md文件对应一个资源文件夹，然而这只是方便了资源的管理，插入图片时不推荐使用hexo官方说的不伦不类的标签插入方法，因为编辑md文件时无法预览图片，而需要安装hexo-asset-image插件，这样正常使用markdown语法对图片的相对路径引用，即可实现编辑时可预览图片，且发布时插件自动将相对路径转为绝对路径。如果碰到与我同样的生成的绝对路径不完全的情况，尝试修改插件的js代码，但修改器建议先备份它，我认为我所解决我遇到问题的方法可能是一种巧合，但我暂时先这么使用了，最终的原因和处理方法可能还需要等待Github上该插件作者的官方回应。","slug":"hexo下完美插入图片","published":1,"updated":"2019-10-01T15:13:30.506Z","comments":1,"layout":"post","photos":[],"link":"2019/10/01/hexo下完美插入图片","_id":"ck1886rp50000qww0fnrlksck","content":"<h1 id=\"完美的hexo中插入图片的解决方案\">完美的hexo中插入图片的解决方案<a href=\"2019/10/01/hexo下完美插入图片#完美的hexo中插入图片的解决方案\"></a></h1><p>以下内容来自ETRD的<a href=\"[http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/](http://etrd.org/2017/01/23/hexo中完美插入本地图片/)\">《hexo中完美插入本地图片》</a>，摘录整理关键部分，留作备份。</p>\n<h3 id=\"Markdown编辑器\">Markdown编辑器<a href=\"2019/10/01/hexo下完美插入图片#Markdown编辑器\"></a></h3><ul>\n<li><p><strong>Typora</strong></p>\n<blockquote>\n<p>不需要关注太多markdown语法就能写出比较好看的markdown，支持实时转换</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"Hexo配置文件的设置\">Hexo配置文件的设置<a href=\"2019/10/01/hexo下完美插入图片#Hexo配置文件的设置\"></a></h3><p> 确保你的Hexo的配置文件_config.yml里面有个这个选项配置，并将其置为true</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">post_asset_folder: true</span><br></pre></td></tr></table></div></figure>\n\n<p> 这个功能实际上是Hexo官方文档中提到的资源文件夹功能，它的作用在于当你使用</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new</span><br></pre></td></tr></table></div></figure>\n\n<p>生成一篇新文章时，会在</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\\source\\_posts</span><br></pre></td></tr></table></div></figure>\n\n<p>目录下生成一个 文章名.md 文件外，附带生成一个与 文章名 同名的文件夹，可以用它来存放这篇文章的所有资源，比如图片，附件等</p>\n<p><a href=\"http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123112354.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123112354.png\" alt=\"QQ截图20170123112354\"></a></p>\n<p>实际上我通常喜欢自己右键手动去建立一个md文件来写博客，而不使用hexo new命令，此时要达到同样的效果，我同样也需要手动去建立一个同名的文件夹去存放资源，我试过这样做是可行的，并且这样做虽然有点麻烦，但我似乎发现了它的一个优点，那就是当我的文章中没有图片时，我并不需要这个空的资源文件夹。</p>\n<p>有了上面的配置，Hexo在public文件下生成html文件时，会在相应的目录中把那文章对应的资源文件夹中的图片等附件复制过去，例如，这是我生成的一个例子：</p>\n<p><a href=\"http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123114005.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123114005.png\" alt=\"QQ截图20170123114005\"></a></p>\n<h3 id=\"安装hexo-asset-image插件\">安装hexo-asset-image插件<a href=\"2019/10/01/hexo下完美插入图片#安装hexo-asset-image插件\"></a></h3><p>你需要安装一个图片路径转换的插件，这个插件名字是<strong>hexo-asset-image</strong>，我目前安装的是最新的0.03版本，使用如下命令安装插件</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></div></figure>\n\n<p>插件安装完以后，实际上是存放在下面的目录文件夹下</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\\blog\\node_modules\\hexo-asset-image</span><br></pre></td></tr></table></div></figure>\n\n<p>想要卸载这个插件怎么处理，我听说直接删掉这个文件夹，反正我这么试过了。</p>\n<h3 id=\"md文件的时间标签\">md文件的时间标签<a href=\"2019/10/01/hexo下完美插入图片#md文件的时间标签\"></a></h3><p>hexo-asset-image的原理应该是根据Hexo生成html后以时间的为目录的规则，将我们图片的相对地址转换成了生成后与时间对应目录的绝对地址，因此我认为md文件中应该要有时间标签，一来是为了让Hexo根据md的时间标签来确定文章的新旧排序，如果没有时间标签，Hexo会把md文件的修改时间作为发布时间，这显然是不合理的，再者这个时间标签，我想hexo-asset-image也会引用到，在一篇实际的博文中，我的md文件完整的开头是这样的：</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---title: hexo中完美插入本地图片date: 2017-01-23 11:00:55categories: hexo使用tags: - hexo- 本地图片- hexo-asset-image---</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"插入图片\">插入图片<a href=\"2019/10/01/hexo下完美插入图片#插入图片\"></a></h3><p>由于每个md文件都有对应的一个资源文件夹，因此，你首先要把需要插入的图片放到这个资源文件夹下，然后进行路径引用，这是上面插入图片时的实际引用代码</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![QQ截图20170123114005](/hexo中完美插入本地图片/QQ截图20170123114005.png)</span><br></pre></td></tr></table></div></figure>\n\n<p>使用Typora又有一个十分方便的地方在于，只需要将图片往这里一拖就插入了，但其实际拖入图片后的插入代码是绝对路径的引用，是这样的</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![QQ截图20170123114005](K:\\FangCloudSync\\Github博客源码\\blog\\source\\_posts\\hexo中完美插入本地图片\\QQ截图20170123114005.png)</span><br></pre></td></tr></table></div></figure>\n\n<p>对比上面的两个代码，我只需要将前面的那段绝对路径删掉<del>K:\\FangCloudSync\\Github博客源码\\blog\\source_posts</del> ，然后再将剩余的<strong>两个\\分别换成/</strong> 就可以了</p>\n<p>这样子，Typora编辑时同时能够看到插入的图片。</p>\n<h3 id=\"生成测试\">生成测试<a href=\"2019/10/01/hexo下完美插入图片#生成测试\"></a></h3><p>在很多网友的文章中，这么做就可以了，你可以尝试一下生成并本地测试，看看是否博客的首页及博文的正文页都能够正确显示图片，或者打开博文生成的html源文件，找到图片插入的地方看看src路径是否是对应public后的绝对路径，如下示例这样</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;&lt;img src=&quot;/2017/01/22/Windows下远程桌面连接树莓派3代/QQ截图20170122163331.png&quot; alt=&quot;QQ截图20170122163331&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></div></figure>\n\n<p>如果本地预览主页和博文正文页显示图片都没有问题，并且html源文件内的图片源地址是上面的格式，那你真幸运没有遇到什么麻烦。</p>\n<h3 id=\"生成绝对路径不完整的问题\">生成绝对路径不完整的问题<a href=\"2019/10/01/hexo下完美插入图片#生成绝对路径不完整的问题\"></a></h3><p>我发现我做了上面的工作后，生成并本地测试查看，图片并不能正确显示，我查看了html文件，它生成的路径是这样的</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;&lt;img src=&quot;/22/imagetest/500.jpg&quot; alt=&quot;500&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></div></figure>\n\n<p>看起来hexo-asset-image的确起了点作用，但似乎有点问题，它生成的绝对路径不完整，仿佛只获取了日，年月没获取到，因为这个md文件的时间是2017-01-22，所以”/2017/01” 似乎没有生成啊，对比上面正确正常的绝对路径，我不明白这是什么原因导致的，也许有可能是我使用的hexo懒人包导致的，Google了一晚上好像就我一个人有这种情况，最后我也在Github上向该插件的作者递交了我遇到的麻烦，但估计等到作者回复不知道是何时了。</p>\n<p>今天早上，我受到<a href=\"http://error408.com/2016/08/02/Hexo七牛图床使用/\" target=\"_blank\" rel=\"noopener\">自定义修改插件，更便捷的使用七牛空间</a> 这篇文章的启发，决定自己也尝试修改插件代码试试能否解决。虽然完全不懂js代码，但还是尝试阅读了那段极其简练的代码，这是其中一段：</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var link = data.permalink;var beginPos = getPosition(link, &apos;/&apos;, 3) + 1;// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.var endPos = link.lastIndexOf(&apos;/&apos;) + 1;   link = link.substring(beginPos, endPos);</span><br></pre></td></tr></table></div></figure>\n\n<p>可以猜测出来这段点大概是在获取博文生成的绝对路径，然后最后与md文件中的相对路径做一个拼接，但这个函数中</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var beginPos = getPosition(link, &apos;/&apos;, 3) + 1;</span><br></pre></td></tr></table></div></figure>\n\n<p>为什么是寻找第3个’/‘？虽然我不知道，但这样做肯定有作者的意图，只是我不懂其中的原理不理解，不可能这个关键的数字是错的。但我假设如果完整的路径应该是/2017/01/22，那么第3个/似乎正好是日期里面的日，跟我的html生成的不完整的路径点似乎有点关联，因此如果这个数字修改为1，那么是不是就能将/2017/01补上了，试试看吧，然而，幸运的是，成功了！</p>\n<figure class=\"highlight plain\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var beginPos = getPosition(link, &apos;/&apos;, 1) + 1;//just by launcher</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"小结\">小结<a href=\"2019/10/01/hexo下完美插入图片#小结\"></a></h3><p>需要插入本地图片，并让Hexo启用资源文件的功能，每个md文件对应一个资源文件夹，然而这只是方便了资源的管理，插入图片时不推荐使用hexo官方说的不伦不类的标签插入方法，因为编辑md文件时无法预览图片，而需要安装hexo-asset-image插件，这样正常使用markdown语法对图片的相对路径引用，即可实现编辑时可预览图片，且发布时插件自动将相对路径转为绝对路径。如果碰到与我同样的生成的绝对路径不完全的情况，尝试修改插件的js代码，但修改器建议先备份它，我认为我所解决我遇到问题的方法可能是一种巧合，但我暂时先这么使用了，最终的原因和处理方法可能还需要等待Github上该插件作者的官方回应。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"完美的hexo中插入图片的解决方案\"><a href=\"#完美的hexo中插入图片的解决方案\" class=\"headerlink\" title=\"完美的hexo中插入图片的解决方案\"></a>完美的hexo中插入图片的解决方案</h1><p>以下内容来自ETRD的<a href=\"[http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/](http://etrd.org/2017/01/23/hexo中完美插入本地图片/)\">《hexo中完美插入本地图片》</a>，摘录整理关键部分，留作备份。</p>\n<h3 id=\"Markdown编辑器\"><a href=\"#Markdown编辑器\" class=\"headerlink\" title=\"Markdown编辑器\"></a>Markdown编辑器</h3><ul>\n<li><p><strong>Typora</strong></p>\n<blockquote>\n<p>不需要关注太多markdown语法就能写出比较好看的markdown，支持实时转换</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"Hexo配置文件的设置\"><a href=\"#Hexo配置文件的设置\" class=\"headerlink\" title=\"Hexo配置文件的设置\"></a>Hexo配置文件的设置</h3><p> 确保你的Hexo的配置文件_config.yml里面有个这个选项配置，并将其置为true</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">post_asset_folder: true</span><br></pre></td></tr></table></figure>\n\n<p> 这个功能实际上是Hexo官方文档中提到的资源文件夹功能，它的作用在于当你使用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new</span><br></pre></td></tr></table></figure>\n\n<p>生成一篇新文章时，会在</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\\source\\_posts</span><br></pre></td></tr></table></figure>\n\n<p>目录下生成一个 文章名.md 文件外，附带生成一个与 文章名 同名的文件夹，可以用它来存放这篇文章的所有资源，比如图片，附件等</p>\n<p><a href=\"http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123112354.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123112354.png\" alt=\"QQ截图20170123112354\"></a></p>\n<p>实际上我通常喜欢自己右键手动去建立一个md文件来写博客，而不使用hexo new命令，此时要达到同样的效果，我同样也需要手动去建立一个同名的文件夹去存放资源，我试过这样做是可行的，并且这样做虽然有点麻烦，但我似乎发现了它的一个优点，那就是当我的文章中没有图片时，我并不需要这个空的资源文件夹。</p>\n<p>有了上面的配置，Hexo在public文件下生成html文件时，会在相应的目录中把那文章对应的资源文件夹中的图片等附件复制过去，例如，这是我生成的一个例子：</p>\n<p><a href=\"http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123114005.png\" target=\"_blank\" rel=\"noopener\"><img src=\"http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123114005.png\" alt=\"QQ截图20170123114005\"></a></p>\n<h3 id=\"安装hexo-asset-image插件\"><a href=\"#安装hexo-asset-image插件\" class=\"headerlink\" title=\"安装hexo-asset-image插件\"></a>安装hexo-asset-image插件</h3><p>你需要安装一个图片路径转换的插件，这个插件名字是<strong>hexo-asset-image</strong>，我目前安装的是最新的0.03版本，使用如下命令安装插件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>\n\n<p>插件安装完以后，实际上是存放在下面的目录文件夹下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\\blog\\node_modules\\hexo-asset-image</span><br></pre></td></tr></table></figure>\n\n<p>想要卸载这个插件怎么处理，我听说直接删掉这个文件夹，反正我这么试过了。</p>\n<h3 id=\"md文件的时间标签\"><a href=\"#md文件的时间标签\" class=\"headerlink\" title=\"md文件的时间标签\"></a>md文件的时间标签</h3><p>hexo-asset-image的原理应该是根据Hexo生成html后以时间的为目录的规则，将我们图片的相对地址转换成了生成后与时间对应目录的绝对地址，因此我认为md文件中应该要有时间标签，一来是为了让Hexo根据md的时间标签来确定文章的新旧排序，如果没有时间标签，Hexo会把md文件的修改时间作为发布时间，这显然是不合理的，再者这个时间标签，我想hexo-asset-image也会引用到，在一篇实际的博文中，我的md文件完整的开头是这样的：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---title: hexo中完美插入本地图片date: 2017-01-23 11:00:55categories: hexo使用tags: - hexo- 本地图片- hexo-asset-image---</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"插入图片\"><a href=\"#插入图片\" class=\"headerlink\" title=\"插入图片\"></a>插入图片</h3><p>由于每个md文件都有对应的一个资源文件夹，因此，你首先要把需要插入的图片放到这个资源文件夹下，然后进行路径引用，这是上面插入图片时的实际引用代码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![QQ截图20170123114005](/hexo中完美插入本地图片/QQ截图20170123114005.png)</span><br></pre></td></tr></table></figure>\n\n<p>使用Typora又有一个十分方便的地方在于，只需要将图片往这里一拖就插入了，但其实际拖入图片后的插入代码是绝对路径的引用，是这样的</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![QQ截图20170123114005](K:\\FangCloudSync\\Github博客源码\\blog\\source\\_posts\\hexo中完美插入本地图片\\QQ截图20170123114005.png)</span><br></pre></td></tr></table></figure>\n\n<p>对比上面的两个代码，我只需要将前面的那段绝对路径删掉<del>K:\\FangCloudSync\\Github博客源码\\blog\\source_posts</del> ，然后再将剩余的<strong>两个\\分别换成/</strong> 就可以了</p>\n<p>这样子，Typora编辑时同时能够看到插入的图片。</p>\n<h3 id=\"生成测试\"><a href=\"#生成测试\" class=\"headerlink\" title=\"生成测试\"></a>生成测试</h3><p>在很多网友的文章中，这么做就可以了，你可以尝试一下生成并本地测试，看看是否博客的首页及博文的正文页都能够正确显示图片，或者打开博文生成的html源文件，找到图片插入的地方看看src路径是否是对应public后的绝对路径，如下示例这样</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;&lt;img src=&quot;/2017/01/22/Windows下远程桌面连接树莓派3代/QQ截图20170122163331.png&quot; alt=&quot;QQ截图20170122163331&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n\n<p>如果本地预览主页和博文正文页显示图片都没有问题，并且html源文件内的图片源地址是上面的格式，那你真幸运没有遇到什么麻烦。</p>\n<h3 id=\"生成绝对路径不完整的问题\"><a href=\"#生成绝对路径不完整的问题\" class=\"headerlink\" title=\"生成绝对路径不完整的问题\"></a>生成绝对路径不完整的问题</h3><p>我发现我做了上面的工作后，生成并本地测试查看，图片并不能正确显示，我查看了html文件，它生成的路径是这样的</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;p&gt;&lt;img src=&quot;/22/imagetest/500.jpg&quot; alt=&quot;500&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>\n\n<p>看起来hexo-asset-image的确起了点作用，但似乎有点问题，它生成的绝对路径不完整，仿佛只获取了日，年月没获取到，因为这个md文件的时间是2017-01-22，所以”/2017/01” 似乎没有生成啊，对比上面正确正常的绝对路径，我不明白这是什么原因导致的，也许有可能是我使用的hexo懒人包导致的，Google了一晚上好像就我一个人有这种情况，最后我也在Github上向该插件的作者递交了我遇到的麻烦，但估计等到作者回复不知道是何时了。</p>\n<p>今天早上，我受到<a href=\"http://error408.com/2016/08/02/Hexo七牛图床使用/\" target=\"_blank\" rel=\"noopener\">自定义修改插件，更便捷的使用七牛空间</a> 这篇文章的启发，决定自己也尝试修改插件代码试试能否解决。虽然完全不懂js代码，但还是尝试阅读了那段极其简练的代码，这是其中一段：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var link = data.permalink;var beginPos = getPosition(link, &apos;/&apos;, 3) + 1;// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.var endPos = link.lastIndexOf(&apos;/&apos;) + 1;   link = link.substring(beginPos, endPos);</span><br></pre></td></tr></table></figure>\n\n<p>可以猜测出来这段点大概是在获取博文生成的绝对路径，然后最后与md文件中的相对路径做一个拼接，但这个函数中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var beginPos = getPosition(link, &apos;/&apos;, 3) + 1;</span><br></pre></td></tr></table></figure>\n\n<p>为什么是寻找第3个’/‘？虽然我不知道，但这样做肯定有作者的意图，只是我不懂其中的原理不理解，不可能这个关键的数字是错的。但我假设如果完整的路径应该是/2017/01/22，那么第3个/似乎正好是日期里面的日，跟我的html生成的不完整的路径点似乎有点关联，因此如果这个数字修改为1，那么是不是就能将/2017/01补上了，试试看吧，然而，幸运的是，成功了！</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var beginPos = getPosition(link, &apos;/&apos;, 1) + 1;//just by launcher</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h3><p>需要插入本地图片，并让Hexo启用资源文件的功能，每个md文件对应一个资源文件夹，然而这只是方便了资源的管理，插入图片时不推荐使用hexo官方说的不伦不类的标签插入方法，因为编辑md文件时无法预览图片，而需要安装hexo-asset-image插件，这样正常使用markdown语法对图片的相对路径引用，即可实现编辑时可预览图片，且发布时插件自动将相对路径转为绝对路径。如果碰到与我同样的生成的绝对路径不完全的情况，尝试修改插件的js代码，但修改器建议先备份它，我认为我所解决我遇到问题的方法可能是一种巧合，但我暂时先这么使用了，最终的原因和处理方法可能还需要等待Github上该插件作者的官方回应。</p>\n","plink":"https://treeeeeeee.github.io/2019/10/01/hexo下完美插入图片/","type":"post","toc":[{"title":"完美的hexo中插入图片的解决方案","id":"完美的hexo中插入图片的解决方案","index":"1"}]},{"title":"基于酷q平台的管理机器人","date":"2019-10-01T12:15:14.000Z","_content":"\n## 酷Q机器人\n\n***********************\n\n**自从samrtQQ下线之后，很多QQ机器人都失效了。**\n\n**但是最近又比较想用这样一个机器人来管理减轻自己的一些工作，于是千方百计的我发现了酷Q。**\n\n**这里附上[官网链接](https://cqp.cc/)**\n\n### 开发以及注意事项\n1. ##### SDK的选择\n\n   酷q提供了多种[SDK](https://cqp.cc/t/15124)但是都是我不常用的，官方的支持的SDK是E语言，这语言emmmm好，都好，写，都可以写。虽然提供了java的sdk但是java版本始终不是正统，咬牙学了一天E语言，最后还是吐了。没办法，不习惯，没说E语言不好。害，最后还是选择的java版本。不过但是还没开始使用的时候我看到了更加好用的一个找到一个更加好用方便的SDK-[PicqBotX](https://github.com/HyDevelop/PicqBotX)，这是通过http的插件来与酷q的程序交互。虽然不能像官方网站上提供的那个那样可以直接打包成jar运行但是个人认为开发更加简单。\n\n2. **环境以及配置细节**\n\n   [这里讲得很清楚，以下说明几个坑](https://github.com/HyDevelop/PicqBotX)：\n\n   * 如果使用kotlin代替java进行开发，请最好使用Gradle对项目进行管理，它对kotlin有更加完美的支持。\n\n   * ![](基于酷q平台的管理机器人/酷q配置坏境的注意事项.jpg)\n\n     在介绍readme中的这个位置一定要看准，下载对应版本的工具，否则可能出问题，比较麻烦，而且没有提示难以排查。\n\n   * 两个端口号一定要对应于你程序中的机器人的端口号否则会链接失败（建议直接用默认的31091 31092，也可自己选择）\n\n\n\n### 本人开发流程\n\n1. 使用idea新建项目选择gradle管理项目![](基于酷q平台的管理机器人/idea新建项目.png)java版本任意，需要kotlin开发勾选kotlin\n\n2. 导包\n\n   ![](基于酷q平台的管理机器人/导包.png)\n\n   导入最新的sdk。\n\n3. 根据需要复制示例代码更改\n\n   ```java\n   public class TestBot\n   {\n       public static void main(String[] args)\n       {\n           // 创建机器人对象 ( 传入配置 )\n           PicqBotX bot = new PicqBotX(new PicqConfig(31092).setDebug(true));\n   \n           // 添加一个机器人账户 ( 名字, 发送URL, 发送端口 )\n           bot.addAccount(\"Bot01\", \"127.0.0.1\", 31091);\n   \n           // 注册事件监听器, 可以注册多个监听器\n           bot.getEventManager().registerListeners(\n                   new TestListener(), \n                   new RequestListener(),\n                   new ExceptionListener()\n           );\n   \n           // 启用指令管理器\n           // 这些字符串是指令前缀, 比如指令\"!help\"的前缀就是\"!\"\n           bot.enableCommandManager(\"bot -\", \"!\", \"/\", \"~\");\n   \n           // 注册指令, 可以注册多个指令\n           bot.getCommandManager().registerCommands(\n                   new CommandSay(),\n                   new CommandTest(),\n                   new CommandVersion()\n           );\n   \n           // 启动机器人, 不会占用主线程\n           bot.startBot();\n       }\n   }\n   ```\n\n\n\n### 个人实现效果和功能\n\n- 通知功能\n\n  <img src=\"基于酷q平台的管理机器人/通知.jpg\" style=\"zoom:50%;\" />\n\n- 请假功能\n\n  有学生请假则会以json格式文本保存在服务器（或者本地）\n\n  <img src=\"基于酷q平台的管理机器人/请假.jpg\" style=\"zoom: 33%;\" />\n\n- 导出请假表格文档，会直接给下载链接\n\n  <img src=\"基于酷q平台的管理机器人/请假文档.jpg\" style=\"zoom: 50%;\" />\n\n- 补登请假\n\n  <img src=\"基于酷q平台的管理机器人/补登请假.jpg\" style=\"zoom: 50%;\" />\n\n- 还有安卓端的管理app和网页版实时查看数据。\n\n\n\n### 部署机器人\n\n\n\n\n\n### 用到的库\n\n*********************************\n\n* 阿帕奇的表格框架\n* gson\n\n通知管理机器人源代码地址：[冷漠无情的机器人]()\n\n因为源代码中有不少私人数据，所以取消。\n\n","source":"_posts/基于酷q平台的管理机器人.md","raw":"---\ntitle: 基于酷q平台的管理机器人\ndate: 2019-10-01 20:15:14\ntags:\n- 世界这么大，当然要多去看看\ncategories: 兴趣\n---\n\n## 酷Q机器人\n\n***********************\n\n**自从samrtQQ下线之后，很多QQ机器人都失效了。**\n\n**但是最近又比较想用这样一个机器人来管理减轻自己的一些工作，于是千方百计的我发现了酷Q。**\n\n**这里附上[官网链接](https://cqp.cc/)**\n\n### 开发以及注意事项\n1. ##### SDK的选择\n\n   酷q提供了多种[SDK](https://cqp.cc/t/15124)但是都是我不常用的，官方的支持的SDK是E语言，这语言emmmm好，都好，写，都可以写。虽然提供了java的sdk但是java版本始终不是正统，咬牙学了一天E语言，最后还是吐了。没办法，不习惯，没说E语言不好。害，最后还是选择的java版本。不过但是还没开始使用的时候我看到了更加好用的一个找到一个更加好用方便的SDK-[PicqBotX](https://github.com/HyDevelop/PicqBotX)，这是通过http的插件来与酷q的程序交互。虽然不能像官方网站上提供的那个那样可以直接打包成jar运行但是个人认为开发更加简单。\n\n2. **环境以及配置细节**\n\n   [这里讲得很清楚，以下说明几个坑](https://github.com/HyDevelop/PicqBotX)：\n\n   * 如果使用kotlin代替java进行开发，请最好使用Gradle对项目进行管理，它对kotlin有更加完美的支持。\n\n   * ![](基于酷q平台的管理机器人/酷q配置坏境的注意事项.jpg)\n\n     在介绍readme中的这个位置一定要看准，下载对应版本的工具，否则可能出问题，比较麻烦，而且没有提示难以排查。\n\n   * 两个端口号一定要对应于你程序中的机器人的端口号否则会链接失败（建议直接用默认的31091 31092，也可自己选择）\n\n\n\n### 本人开发流程\n\n1. 使用idea新建项目选择gradle管理项目![](基于酷q平台的管理机器人/idea新建项目.png)java版本任意，需要kotlin开发勾选kotlin\n\n2. 导包\n\n   ![](基于酷q平台的管理机器人/导包.png)\n\n   导入最新的sdk。\n\n3. 根据需要复制示例代码更改\n\n   ```java\n   public class TestBot\n   {\n       public static void main(String[] args)\n       {\n           // 创建机器人对象 ( 传入配置 )\n           PicqBotX bot = new PicqBotX(new PicqConfig(31092).setDebug(true));\n   \n           // 添加一个机器人账户 ( 名字, 发送URL, 发送端口 )\n           bot.addAccount(\"Bot01\", \"127.0.0.1\", 31091);\n   \n           // 注册事件监听器, 可以注册多个监听器\n           bot.getEventManager().registerListeners(\n                   new TestListener(), \n                   new RequestListener(),\n                   new ExceptionListener()\n           );\n   \n           // 启用指令管理器\n           // 这些字符串是指令前缀, 比如指令\"!help\"的前缀就是\"!\"\n           bot.enableCommandManager(\"bot -\", \"!\", \"/\", \"~\");\n   \n           // 注册指令, 可以注册多个指令\n           bot.getCommandManager().registerCommands(\n                   new CommandSay(),\n                   new CommandTest(),\n                   new CommandVersion()\n           );\n   \n           // 启动机器人, 不会占用主线程\n           bot.startBot();\n       }\n   }\n   ```\n\n\n\n### 个人实现效果和功能\n\n- 通知功能\n\n  <img src=\"基于酷q平台的管理机器人/通知.jpg\" style=\"zoom:50%;\" />\n\n- 请假功能\n\n  有学生请假则会以json格式文本保存在服务器（或者本地）\n\n  <img src=\"基于酷q平台的管理机器人/请假.jpg\" style=\"zoom: 33%;\" />\n\n- 导出请假表格文档，会直接给下载链接\n\n  <img src=\"基于酷q平台的管理机器人/请假文档.jpg\" style=\"zoom: 50%;\" />\n\n- 补登请假\n\n  <img src=\"基于酷q平台的管理机器人/补登请假.jpg\" style=\"zoom: 50%;\" />\n\n- 还有安卓端的管理app和网页版实时查看数据。\n\n\n\n### 部署机器人\n\n\n\n\n\n### 用到的库\n\n*********************************\n\n* 阿帕奇的表格框架\n* gson\n\n通知管理机器人源代码地址：[冷漠无情的机器人]()\n\n因为源代码中有不少私人数据，所以取消。\n\n","slug":"基于酷q平台的管理机器人","published":1,"updated":"2019-10-01T19:02:02.260Z","comments":1,"layout":"post","photos":[],"link":"2019/10/01/基于酷q平台的管理机器人","_id":"ck1886rpa0001qww0s1k5cymg","content":"<h2 id=\"酷Q机器人\">酷Q机器人<a href=\"2019/10/01/基于酷q平台的管理机器人#酷Q机器人\"></a></h2><hr>\n<p><strong>自从samrtQQ下线之后，很多QQ机器人都失效了。</strong></p>\n<p><strong>但是最近又比较想用这样一个机器人来管理减轻自己的一些工作，于是千方百计的我发现了酷Q。</strong></p>\n<p><strong>这里附上<a href=\"https://cqp.cc/\" target=\"_blank\" rel=\"noopener\">官网链接</a></strong></p>\n<h3 id=\"开发以及注意事项\">开发以及注意事项<a href=\"2019/10/01/基于酷q平台的管理机器人#开发以及注意事项\"></a></h3><ol>\n<li><h5 id=\"SDK的选择\"><a href=\"2019/10/01/基于酷q平台的管理机器人#SDK的选择\" class=\"headerlink\" title=\"SDK的选择\"></a>SDK的选择</h5><p>酷q提供了多种<a href=\"https://cqp.cc/t/15124\" target=\"_blank\" rel=\"noopener\">SDK</a>但是都是我不常用的，官方的支持的SDK是E语言，这语言emmmm好，都好，写，都可以写。虽然提供了java的sdk但是java版本始终不是正统，咬牙学了一天E语言，最后还是吐了。没办法，不习惯，没说E语言不好。害，最后还是选择的java版本。不过但是还没开始使用的时候我看到了更加好用的一个找到一个更加好用方便的SDK-<a href=\"https://github.com/HyDevelop/PicqBotX\" target=\"_blank\" rel=\"noopener\">PicqBotX</a>，这是通过http的插件来与酷q的程序交互。虽然不能像官方网站上提供的那个那样可以直接打包成jar运行但是个人认为开发更加简单。</p>\n</li>\n<li><p><strong>环境以及配置细节</strong></p>\n<p><a href=\"https://github.com/HyDevelop/PicqBotX\" target=\"_blank\" rel=\"noopener\">这里讲得很清楚，以下说明几个坑</a>：</p>\n<ul>\n<li><p>如果使用kotlin代替java进行开发，请最好使用Gradle对项目进行管理，它对kotlin有更加完美的支持。</p>\n</li>\n<li><p><img src=\"/2019/10/01/基于酷q平台的管理机器人/%E9%85%B7q%E9%85%8D%E7%BD%AE%E5%9D%8F%E5%A2%83%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.jpg\" alt class=\"article-img\"></p>\n<p>在介绍readme中的这个位置一定要看准，下载对应版本的工具，否则可能出问题，比较麻烦，而且没有提示难以排查。</p>\n</li>\n<li><p>两个端口号一定要对应于你程序中的机器人的端口号否则会链接失败（建议直接用默认的31091 31092，也可自己选择）</p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"本人开发流程\">本人开发流程<a href=\"2019/10/01/基于酷q平台的管理机器人#本人开发流程\"></a></h3><ol>\n<li><p>使用idea新建项目选择gradle管理项目<img src=\"/2019/10/01/基于酷q平台的管理机器人/idea%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png\" alt>java版本任意，需要kotlin开发勾选kotlin</p>\n</li>\n<li><p>导包</p>\n<p><img src=\"/2019/10/01/基于酷q平台的管理机器人/%E5%AF%BC%E5%8C%85.png\" alt class=\"article-img\"></p>\n<p>导入最新的sdk。</p>\n</li>\n<li><p>根据需要复制示例代码更改</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBot</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 创建机器人对象 ( 传入配置 )</span></span><br><span class=\"line\">        PicqBotX bot = <span class=\"keyword\">new</span> PicqBotX(<span class=\"keyword\">new</span> PicqConfig(<span class=\"number\">31092</span>).setDebug(<span class=\"keyword\">true</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加一个机器人账户 ( 名字, 发送URL, 发送端口 )</span></span><br><span class=\"line\">        bot.addAccount(<span class=\"string\">\"Bot01\"</span>, <span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">31091</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 注册事件监听器, 可以注册多个监听器</span></span><br><span class=\"line\">        bot.getEventManager().registerListeners(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> TestListener(), </span><br><span class=\"line\">                <span class=\"keyword\">new</span> RequestListener(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> ExceptionListener()</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 启用指令管理器</span></span><br><span class=\"line\">        <span class=\"comment\">// 这些字符串是指令前缀, 比如指令\"!help\"的前缀就是\"!\"</span></span><br><span class=\"line\">        bot.enableCommandManager(<span class=\"string\">\"bot -\"</span>, <span class=\"string\">\"!\"</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\"~\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 注册指令, 可以注册多个指令</span></span><br><span class=\"line\">        bot.getCommandManager().registerCommands(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandSay(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandTest(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandVersion()</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 启动机器人, 不会占用主线程</span></span><br><span class=\"line\">        bot.startBot();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n<h3 id=\"个人实现效果和功能\">个人实现效果和功能<a href=\"2019/10/01/基于酷q平台的管理机器人#个人实现效果和功能\"></a></h3><ul>\n<li><p>通知功能</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/通知.jpg\" style=\"zoom:50%;\">\n</li>\n<li><p>请假功能</p>\n<p>有学生请假则会以json格式文本保存在服务器（或者本地）</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/请假.jpg\" style=\"zoom: 33%;\">\n</li>\n<li><p>导出请假表格文档，会直接给下载链接</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/请假文档.jpg\" style=\"zoom: 50%;\">\n</li>\n<li><p>补登请假</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/补登请假.jpg\" style=\"zoom: 50%;\">\n</li>\n<li><p>还有安卓端的管理app和网页版实时查看数据。</p>\n</li>\n</ul>\n<h3 id=\"部署机器人\">部署机器人<a href=\"2019/10/01/基于酷q平台的管理机器人#部署机器人\"></a></h3><h3 id=\"用到的库\">用到的库<a href=\"2019/10/01/基于酷q平台的管理机器人#用到的库\"></a></h3><hr>\n<ul>\n<li>阿帕奇的表格框架</li>\n<li>gson</li>\n</ul>\n<p>通知管理机器人源代码地址：<a href>冷漠无情的机器人</a></p>\n<p>因为源代码中有不少私人数据，所以取消。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"酷Q机器人\"><a href=\"#酷Q机器人\" class=\"headerlink\" title=\"酷Q机器人\"></a>酷Q机器人</h2><hr>\n<p><strong>自从samrtQQ下线之后，很多QQ机器人都失效了。</strong></p>\n<p><strong>但是最近又比较想用这样一个机器人来管理减轻自己的一些工作，于是千方百计的我发现了酷Q。</strong></p>\n<p><strong>这里附上<a href=\"https://cqp.cc/\" target=\"_blank\" rel=\"noopener\">官网链接</a></strong></p>\n<h3 id=\"开发以及注意事项\"><a href=\"#开发以及注意事项\" class=\"headerlink\" title=\"开发以及注意事项\"></a>开发以及注意事项</h3><ol>\n<li><h5 id=\"SDK的选择\"><a href=\"#SDK的选择\" class=\"headerlink\" title=\"SDK的选择\"></a>SDK的选择</h5><p>酷q提供了多种<a href=\"https://cqp.cc/t/15124\" target=\"_blank\" rel=\"noopener\">SDK</a>但是都是我不常用的，官方的支持的SDK是E语言，这语言emmmm好，都好，写，都可以写。虽然提供了java的sdk但是java版本始终不是正统，咬牙学了一天E语言，最后还是吐了。没办法，不习惯，没说E语言不好。害，最后还是选择的java版本。不过但是还没开始使用的时候我看到了更加好用的一个找到一个更加好用方便的SDK-<a href=\"https://github.com/HyDevelop/PicqBotX\" target=\"_blank\" rel=\"noopener\">PicqBotX</a>，这是通过http的插件来与酷q的程序交互。虽然不能像官方网站上提供的那个那样可以直接打包成jar运行但是个人认为开发更加简单。</p>\n</li>\n<li><p><strong>环境以及配置细节</strong></p>\n<p><a href=\"https://github.com/HyDevelop/PicqBotX\" target=\"_blank\" rel=\"noopener\">这里讲得很清楚，以下说明几个坑</a>：</p>\n<ul>\n<li><p>如果使用kotlin代替java进行开发，请最好使用Gradle对项目进行管理，它对kotlin有更加完美的支持。</p>\n</li>\n<li><p><img src=\"/2019/10/01/基于酷q平台的管理机器人/%E9%85%B7q%E9%85%8D%E7%BD%AE%E5%9D%8F%E5%A2%83%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.jpg\" alt></p>\n<p>在介绍readme中的这个位置一定要看准，下载对应版本的工具，否则可能出问题，比较麻烦，而且没有提示难以排查。</p>\n</li>\n<li><p>两个端口号一定要对应于你程序中的机器人的端口号否则会链接失败（建议直接用默认的31091 31092，也可自己选择）</p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"本人开发流程\"><a href=\"#本人开发流程\" class=\"headerlink\" title=\"本人开发流程\"></a>本人开发流程</h3><ol>\n<li><p>使用idea新建项目选择gradle管理项目<img src=\"/2019/10/01/基于酷q平台的管理机器人/idea%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png\" alt>java版本任意，需要kotlin开发勾选kotlin</p>\n</li>\n<li><p>导包</p>\n<p><img src=\"/2019/10/01/基于酷q平台的管理机器人/%E5%AF%BC%E5%8C%85.png\" alt></p>\n<p>导入最新的sdk。</p>\n</li>\n<li><p>根据需要复制示例代码更改</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBot</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 创建机器人对象 ( 传入配置 )</span></span><br><span class=\"line\">        PicqBotX bot = <span class=\"keyword\">new</span> PicqBotX(<span class=\"keyword\">new</span> PicqConfig(<span class=\"number\">31092</span>).setDebug(<span class=\"keyword\">true</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加一个机器人账户 ( 名字, 发送URL, 发送端口 )</span></span><br><span class=\"line\">        bot.addAccount(<span class=\"string\">\"Bot01\"</span>, <span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">31091</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 注册事件监听器, 可以注册多个监听器</span></span><br><span class=\"line\">        bot.getEventManager().registerListeners(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> TestListener(), </span><br><span class=\"line\">                <span class=\"keyword\">new</span> RequestListener(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> ExceptionListener()</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 启用指令管理器</span></span><br><span class=\"line\">        <span class=\"comment\">// 这些字符串是指令前缀, 比如指令\"!help\"的前缀就是\"!\"</span></span><br><span class=\"line\">        bot.enableCommandManager(<span class=\"string\">\"bot -\"</span>, <span class=\"string\">\"!\"</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\"~\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 注册指令, 可以注册多个指令</span></span><br><span class=\"line\">        bot.getCommandManager().registerCommands(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandSay(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandTest(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandVersion()</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 启动机器人, 不会占用主线程</span></span><br><span class=\"line\">        bot.startBot();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h3 id=\"个人实现效果和功能\"><a href=\"#个人实现效果和功能\" class=\"headerlink\" title=\"个人实现效果和功能\"></a>个人实现效果和功能</h3><ul>\n<li><p>通知功能</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/通知.jpg\" style=\"zoom:50%;\">\n</li>\n<li><p>请假功能</p>\n<p>有学生请假则会以json格式文本保存在服务器（或者本地）</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/请假.jpg\" style=\"zoom: 33%;\">\n</li>\n<li><p>导出请假表格文档，会直接给下载链接</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/请假文档.jpg\" style=\"zoom: 50%;\">\n</li>\n<li><p>补登请假</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/补登请假.jpg\" style=\"zoom: 50%;\">\n</li>\n<li><p>还有安卓端的管理app和网页版实时查看数据。</p>\n</li>\n</ul>\n<h3 id=\"部署机器人\"><a href=\"#部署机器人\" class=\"headerlink\" title=\"部署机器人\"></a>部署机器人</h3><h3 id=\"用到的库\"><a href=\"#用到的库\" class=\"headerlink\" title=\"用到的库\"></a>用到的库</h3><hr>\n<ul>\n<li>阿帕奇的表格框架</li>\n<li>gson</li>\n</ul>\n<p>通知管理机器人源代码地址：<a href>冷漠无情的机器人</a></p>\n<p>因为源代码中有不少私人数据，所以取消。</p>\n","plink":"https://treeeeeeee.github.io/2019/10/01/基于酷q平台的管理机器人/","type":"post","toc":[{"title":"酷Q机器人","id":"酷Q机器人","index":"1","children":[{"title":"开发以及注意事项","id":"开发以及注意事项","index":"1.1"},{"title":"本人开发流程","id":"本人开发流程","index":"1.2"},{"title":"个人实现效果和功能","id":"个人实现效果和功能","index":"1.3"},{"title":"部署机器人","id":"部署机器人","index":"1.4"},{"title":"用到的库","id":"用到的库","index":"1.5"}]}]},{"title":"测试","author":"Jon","date":"2019-10-01T19:32:00.000Z","_content":"","source":"_posts/试.md","raw":"title: 测试\nauthor: Jon\ntags: []\ncategories: []\ndate: 2019-10-02 03:32:00\n---\n","slug":"试","published":1,"updated":"2019-10-01T19:35:17.617Z","_id":"ck188ohct0000q4w03aognnvg","comments":1,"layout":"post","photos":[],"link":"2019/10/02/试","content":"","site":{"data":{}},"excerpt":"","more":"","plink":"https://treeeeeeee.github.io/2019/10/02/试/","type":"post"}],"PostAsset":[{"_id":"source/_posts/基于酷q平台的管理机器人/补登请假.jpg","slug":"补登请假.jpg","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0},{"_id":"source/_posts/基于酷q平台的管理机器人/导包.png","slug":"导包.png","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0},{"_id":"source/_posts/基于酷q平台的管理机器人/idea新建项目.png","slug":"idea新建项目.png","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0},{"_id":"source/_posts/基于酷q平台的管理机器人/请假.jpg","slug":"请假.jpg","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0},{"_id":"source/_posts/基于酷q平台的管理机器人/请假文档.jpg","slug":"请假文档.jpg","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0},{"_id":"source/_posts/基于酷q平台的管理机器人/通知.jpg","slug":"通知.jpg","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0},{"_id":"source/_posts/基于酷q平台的管理机器人/酷q配置坏境的注意事项.jpg","slug":"酷q配置坏境的注意事项.jpg","post":"ck1886rpa0001qww0s1k5cymg","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ck1886rp50000qww0fnrlksck","category_id":"ck1886rpf0002qww05mlzbosy","_id":"ck1886rpo0007qww0nc2kg18b"},{"post_id":"ck1886rpa0001qww0s1k5cymg","category_id":"ck1886rpf0002qww05mlzbosy","_id":"ck1886rpp0009qww0uq88u2yl"}],"PostTag":[{"post_id":"ck1886rp50000qww0fnrlksck","tag_id":"ck1886rph0003qww0mtenghyi","_id":"ck1886rpn0006qww00m7kl11v"},{"post_id":"ck1886rpa0001qww0s1k5cymg","tag_id":"ck1886rpl0005qww0w4spphyq","_id":"ck1886rpp0008qww0zzagrvw9"}],"Tag":[{"name":"hexo配置","_id":"ck1886rph0003qww0mtenghyi"},{"name":"世界这么大，当然要多去看看","_id":"ck1886rpl0005qww0w4spphyq"}]}}