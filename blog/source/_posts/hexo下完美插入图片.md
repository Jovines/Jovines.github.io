title: 完美的hexo中插入图片的解决方案
tags:
  - hexo配置
categories: 兴趣
date: 2019-10-01 23:13:00
---

# 完美的hexo中插入图片的解决方案

以下内容来自ETRD的[《hexo中完美插入本地图片》]([http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/](http://etrd.org/2017/01/23/hexo中完美插入本地图片/))，摘录整理关键部分，留作备份。

### Markdown编辑器

  * **Typora**

    > 不需要关注太多markdown语法就能写出比较好看的markdown，支持实时转换

### Hexo配置文件的设置

 确保你的Hexo的配置文件_config.yml里面有个这个选项配置，并将其置为true

```
post_asset_folder: true
```

 这个功能实际上是Hexo官方文档中提到的资源文件夹功能，它的作用在于当你使用

```
hexo new
```

生成一篇新文章时，会在

```
\source\_posts
```

目录下生成一个 文章名.md 文件外，附带生成一个与 文章名 同名的文件夹，可以用它来存放这篇文章的所有资源，比如图片，附件等

[![QQ截图20170123112354](http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/QQ%E6%88%AA%E5%9B%BE20170123112354.png)](http://etrd.org/2017/01/23/hexo中完美插入本地图片/QQ截图20170123112354.png)

实际上我通常喜欢自己右键手动去建立一个md文件来写博客，而不使用hexo new命令，此时要达到同样的效果，我同样也需要手动去建立一个同名的文件夹去存放资源，我试过这样做是可行的，并且这样做虽然有点麻烦，但我似乎发现了它的一个优点，那就是当我的文章中没有图片时，我并不需要这个空的资源文件夹。

有了上面的配置，Hexo在public文件下生成html文件时，会在相应的目录中把那文章对应的资源文件夹中的图片等附件复制过去，例如，这是我生成的一个例子：

### 安装hexo-asset-image插件

你需要安装一个图片路径转换的插件，这个插件名字是**hexo-asset-image**，我目前安装的是最新的0.03版本，使用如下命令安装插件

```
npm install https://github.com/CodeFalling/hexo-asset-image --save
```

插件安装完以后，实际上是存放在下面的目录文件夹下

```
\blog\node_modules\hexo-asset-image
```

想要卸载这个插件怎么处理，我听说直接删掉这个文件夹，反正我这么试过了。

### md文件的时间标签

hexo-asset-image的原理应该是根据Hexo生成html后以时间的为目录的规则，将我们图片的相对地址转换成了生成后与时间对应目录的绝对地址，因此我认为md文件中应该要有时间标签，一来是为了让Hexo根据md的时间标签来确定文章的新旧排序，如果没有时间标签，Hexo会把md文件的修改时间作为发布时间，这显然是不合理的，再者这个时间标签，我想hexo-asset-image也会引用到，在一篇实际的博文中，我的md文件完整的开头是这样的：

```
title: hexo中完美插入本地图片
date: 2017-01-23 11:00:55
categories: hexo使用
tags: 
- hexo
- 本地图片
- hexo-asset-image
```

### 插入图片

由于每个md文件都有对应的一个资源文件夹，因此，你首先要把需要插入的图片放到这个资源文件夹下，然后进行路径引用，这是上面插入图片时的实际引用代码

```
![QQ截图20170123114005](/hexo中完美插入本地图片/QQ截图20170123114005.png)
```

使用Typora又有一个十分方便的地方在于，只需要将图片往这里一拖就插入了，但其实际拖入图片后的插入代码是绝对路径的引用，是这样的

```
![QQ截图20170123114005](K:\FangCloudSync\Github博客源码\blog\source\_posts\hexo中完美插入本地图片\QQ截图20170123114005.png)
```

对比上面的两个代码，我只需要将前面的那段绝对路径删掉~~K:\FangCloudSync\Github博客源码\blog\source_posts~~ ，然后再将剩余的**两个\分别换成/** 就可以了

当然你要是觉得还是麻烦，可以直接打开typora的偏好设置

![TIM截图20191230113452](hexo%E4%B8%8B%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/TIM%E6%88%AA%E5%9B%BE20191230113452.png)

进行如上设置，就不用手动编辑成相对路径了

这样子，Typora编辑时同时能够看到插入的图片。