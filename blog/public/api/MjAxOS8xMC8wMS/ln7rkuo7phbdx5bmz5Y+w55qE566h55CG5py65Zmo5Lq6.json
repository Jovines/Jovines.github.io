{"title":"基于酷q平台的管理机器人","date":"2019-10-01T12:15:14.000Z","link":"2019/10/01/基于酷q平台的管理机器人","comments":true,"tags":["世界这么大，当然要多去看看"],"categories":["兴趣"],"updated":"2019-11-05T17:34:44.404Z","content":"<h2 id=\"酷Q机器人\">酷Q机器人<a href=\"2019/10/01/基于酷q平台的管理机器人#酷Q机器人\"></a></h2><hr>\n<p><strong>自从samrtQQ下线之后，很多QQ机器人都失效了。</strong></p>\n<p><strong>但是最近又比较想用这样一个机器人来管理减轻自己的一些工作，于是千方百计的我发现了酷Q。</strong></p>\n<p><strong>这里附上<a href=\"https://cqp.cc/\" target=\"_blank\" rel=\"noopener\">官网链接</a></strong></p>\n<h3 id=\"开发以及注意事项\">开发以及注意事项<a href=\"2019/10/01/基于酷q平台的管理机器人#开发以及注意事项\"></a></h3><ol>\n<li><h5 id=\"SDK的选择\"><a href=\"2019/10/01/基于酷q平台的管理机器人#SDK的选择\" class=\"headerlink\" title=\"SDK的选择\"></a>SDK的选择</h5><p>酷q提供了多种<a href=\"https://cqp.cc/t/15124\" target=\"_blank\" rel=\"noopener\">SDK</a>但是都是我不常用的，官方的支持的SDK是E语言，这语言emmmm好，都好，写，都可以写。虽然提供了java的sdk但是java版本始终不是正统，咬牙学了一天E语言，最后还是吐了。没办法，不习惯，没说E语言不好。害，最后还是选择的java版本。不过但是还没开始使用的时候我看到了更加好用的一个找到一个更加好用方便的SDK-<a href=\"https://github.com/HyDevelop/PicqBotX\" target=\"_blank\" rel=\"noopener\">PicqBotX</a>，这是通过http的插件来与酷q的程序交互。虽然不能像官方网站上提供的那个那样可以直接打包成jar运行但是个人认为开发更加简单。</p>\n</li>\n<li><p><strong>环境以及配置细节</strong></p>\n<p><a href=\"https://github.com/HyDevelop/PicqBotX\" target=\"_blank\" rel=\"noopener\">这里讲得很清楚，以下说明几个坑</a>：</p>\n<ul>\n<li><p>如果使用kotlin代替java进行开发，请最好使用Gradle对项目进行管理，它对kotlin有更加完美的支持。</p>\n</li>\n<li><p><img src=\"/2019/10/01/基于酷q平台的管理机器人/%E9%85%B7q%E9%85%8D%E7%BD%AE%E5%9D%8F%E5%A2%83%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.jpg\" alt class=\"article-img\"></p>\n<p>在介绍readme中的这个位置一定要看准，下载对应版本的工具，否则可能出问题，比较麻烦，而且没有提示难以排查。</p>\n</li>\n<li><p>两个端口号一定要对应于你程序中的机器人的端口号否则会链接失败（建议直接用默认的31091 31092，也可自己选择）</p>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"本人开发流程\">本人开发流程<a href=\"2019/10/01/基于酷q平台的管理机器人#本人开发流程\"></a></h3><ol>\n<li><p>使用idea新建项目选择gradle管理项目<img src=\"/2019/10/01/基于酷q平台的管理机器人/idea%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE.png\" alt>java版本任意，需要kotlin开发勾选kotlin</p>\n</li>\n<li><p>导包</p>\n<p><img src=\"/2019/10/01/基于酷q平台的管理机器人/%E5%AF%BC%E5%8C%85.png\" alt class=\"article-img\"></p>\n<p>导入最新的sdk。</p>\n</li>\n<li><p>根据需要复制示例代码更改</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBot</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 创建机器人对象 ( 传入配置 )</span></span><br><span class=\"line\">        PicqBotX bot = <span class=\"keyword\">new</span> PicqBotX(<span class=\"keyword\">new</span> PicqConfig(<span class=\"number\">31092</span>).setDebug(<span class=\"keyword\">true</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 添加一个机器人账户 ( 名字, 发送URL, 发送端口 )</span></span><br><span class=\"line\">        bot.addAccount(<span class=\"string\">\"Bot01\"</span>, <span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">31091</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 注册事件监听器, 可以注册多个监听器</span></span><br><span class=\"line\">        bot.getEventManager().registerListeners(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> TestListener(), </span><br><span class=\"line\">                <span class=\"keyword\">new</span> RequestListener(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> ExceptionListener()</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 启用指令管理器</span></span><br><span class=\"line\">        <span class=\"comment\">// 这些字符串是指令前缀, 比如指令\"!help\"的前缀就是\"!\"</span></span><br><span class=\"line\">        bot.enableCommandManager(<span class=\"string\">\"bot -\"</span>, <span class=\"string\">\"!\"</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\"~\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 注册指令, 可以注册多个指令</span></span><br><span class=\"line\">        bot.getCommandManager().registerCommands(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandSay(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandTest(),</span><br><span class=\"line\">                <span class=\"keyword\">new</span> CommandVersion()</span><br><span class=\"line\">        );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 启动机器人, 不会占用主线程</span></span><br><span class=\"line\">        bot.startBot();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ol>\n<h3 id=\"个人实现效果和功能\">个人实现效果和功能<a href=\"2019/10/01/基于酷q平台的管理机器人#个人实现效果和功能\"></a></h3><ul>\n<li><p>通知功能</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/通知.jpg\" style=\"zoom:50%;\">\n</li>\n<li><p>请假功能</p>\n<p>有学生请假则会以json格式文本保存在服务器（或者本地）</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/请假.jpg\" style=\"zoom: 33%;\">\n</li>\n<li><p>导出请假表格文档，会直接给下载链接</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/请假文档.jpg\" style=\"zoom: 50%;\">\n</li>\n<li><p>补登请假</p>\n<img src=\"/2019/10/01/基于酷q平台的管理机器人/补登请假.jpg\" style=\"zoom: 50%;\">\n</li>\n<li><p>还有安卓端的管理app和网页版实时查看数据。</p>\n</li>\n</ul>\n<h3 id=\"部署机器人\">部署机器人<a href=\"2019/10/01/基于酷q平台的管理机器人#部署机器人\"></a></h3><h3 id=\"用到的库\">用到的库<a href=\"2019/10/01/基于酷q平台的管理机器人#用到的库\"></a></h3><hr>\n<ul>\n<li>阿帕奇的表格框架</li>\n<li>gson</li>\n</ul>\n<p>通知管理机器人源代码地址：<a href>冷漠无情的机器人</a></p>\n<p>因为源代码中有不少私人数据，所以取消。</p>\n","prev":{"title":"完美的hexo中插入图片的解决方案","link":"2019/10/01/hexo下完美插入图片"},"plink":"https://treeeeeeee.github.io/2019/10/01/基于酷q平台的管理机器人/","toc":[{"title":"酷Q机器人","id":"酷Q机器人","index":"1","children":[{"title":"开发以及注意事项","id":"开发以及注意事项","index":"1.1"},{"title":"本人开发流程","id":"本人开发流程","index":"1.2"},{"title":"个人实现效果和功能","id":"个人实现效果和功能","index":"1.3"},{"title":"部署机器人","id":"部署机器人","index":"1.4"},{"title":"用到的库","id":"用到的库","index":"1.5"}]}]}